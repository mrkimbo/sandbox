"use strict";var elements={root:document.find("#main-container"),header:document.find("#header"),scrollBox:document.find("#scroll-box"),scroll:document.find("#scroll"),container:document.find("#page-container"),pages:document.findAll(".page"),btns:document.findAll(".options .btn")};var answers=[0,0,0];var dirty=false,pos;var maxScroll;var screenSize=new Rect();init();function init(){Hammer(elements.root,{drag_max_touches:1,drag_block_horizontal:true,drag_lock_to_axis:true}).on("touch dragup dragdown swipeup swipedown release",handleTouchEvent);elements.scrollBox.addEventListener("scroll",redraw,false);elements.scrollBox.addEventListener("click",function(a){var b;elements.btns.forEach(function(c){b=getComputedStyle(c)})});document.findAll("nav .btn").forEach(function(a){a.addEventListener("click",function(b){log("click");var c=MainTimeline.getLabelTime("Page"+b.target.id.match(/[0-9]/)[0]);scrollTo(maxScroll*(c/MainTimeline.totalTime()))})});window.addEventListener("resize",onResize,false);onResize(null)}function onResize(a){redrawPages();redrawTweens()}function redrawPages(){elements.scrollBox.style.height=elements.root.clientHeight-78+"px";maxScroll=elements.scrollBox.scrollHeight-elements.scrollBox.clientHeight;screenSize.width=elements.scrollBox.clientWidth;screenSize.height=elements.scrollBox.clientHeight}function loop(){if(dirty){redraw();checkDirty()}_raf(loop)}loop();function redraw(a){pos=getScrollTime();MainTimeline.tweenTo(pos,{timeScale:1})}var lastScrollPos;function handleTouchEvent(a){switch(a.type){case"touch":if(a.target instanceof HTMLButtonElement){return}lastScrollPos=elements.scrollBox.scrollTop;break;case"dragup":case"dragdown":scrollTo(lastScrollPos-a.gesture.deltaY);break;case"swipeup":scrollTo(lastScrollPos+1000);a.gesture.stopDetect();break;case"swipedown":scrollTo(lastScrollPos-1000);a.gesture.stopDetect();break;case"release":break}a.gesture.preventDefault()}function checkDirty(){dirty=false};