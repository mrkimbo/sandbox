/*! Hammer.JS - v1.0.5 - 2013-04-07
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2013 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */
(function(n,i){var I=function(K,J){return new I.Instance(K,J||{})};I.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};I.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled;I.HAS_TOUCHEVENTS=("ontouchstart" in n);I.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i;I.NO_MOUSEEVENTS=I.HAS_TOUCHEVENTS&&navigator.userAgent.match(I.MOBILE_REGEX);I.EVENT_TYPES={};I.DIRECTION_DOWN="down";I.DIRECTION_LEFT="left";I.DIRECTION_UP="up";I.DIRECTION_RIGHT="right";I.POINTER_MOUSE="mouse";I.POINTER_TOUCH="touch";I.POINTER_PEN="pen";I.EVENT_START="start";I.EVENT_MOVE="move";I.EVENT_END="end";I.DOCUMENT=document;I.plugins={};I.READY=false;function w(){if(I.READY){return}I.event.determineEventTypes();for(var J in I.gestures){if(I.gestures.hasOwnProperty(J)){I.detection.register(I.gestures[J])}}I.event.onTouch(I.DOCUMENT,I.EVENT_MOVE,I.detection.detect);I.event.onTouch(I.DOCUMENT,I.EVENT_END,I.detection.detect);I.READY=true}I.Instance=function(L,K){var J=this;w();this.element=L;this.enabled=true;this.options=I.utils.extend(I.utils.extend({},I.defaults),K||{});if(this.options.stop_browser_behavior){I.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior)}I.event.onTouch(L,I.EVENT_START,function(M){if(J.enabled){I.detection.startDetect(J,M)}});return this};I.Instance.prototype={on:function j(K,L){var M=K.split(" ");for(var J=0;J<M.length;J++){this.element.addEventListener(M[J],L,false)}return this},off:function A(K,L){var M=K.split(" ");for(var J=0;J<M.length;J++){this.element.removeEventListener(M[J],L,false)}return this},trigger:function c(K,M){var L=I.DOCUMENT.createEvent("Event");L.initEvent(K,true,true);L.gesture=M;var J=this.element;if(I.utils.hasParent(M.target,J)){J=M.target}J.dispatchEvent(L);return this},enable:function t(J){this.enabled=J;return this}};var k=null;var y=false;var d=false;I.event={bindDom:function(L,N,M){var K=N.split(" ");for(var J=0;J<K.length;J++){L.addEventListener(K[J],M,false)}},onTouch:function D(L,K,M){var J=this;this.bindDom(L,I.EVENT_TYPES[K],function N(P){var Q=P.type.toLowerCase();if(Q.match(/mouse/)&&d){return}else{if(Q.match(/touch/)||Q.match(/pointerdown/)||(Q.match(/mouse/)&&P.which===1)){y=true}}if(Q.match(/touch|pointer/)){d=true}var O=0;if(y){if(I.HAS_POINTEREVENTS&&K!=I.EVENT_END){O=I.PointerEvent.updatePointer(K,P)}else{if(Q.match(/touch/)){O=P.touches.length}else{if(!d){O=Q.match(/up/)?0:1}}}if(O>0&&K==I.EVENT_END){K=I.EVENT_MOVE}else{if(!O){K=I.EVENT_END}}if(!O&&k!==null){P=k}else{k=P}M.call(I.detection,J.collectEventData(L,K,P));if(I.HAS_POINTEREVENTS&&K==I.EVENT_END){O=I.PointerEvent.updatePointer(K,P)}}if(!O){k=null;y=false;d=false;I.PointerEvent.reset()}})},determineEventTypes:function v(){var J;if(I.HAS_POINTEREVENTS){J=I.PointerEvent.getEvents()}else{if(I.NO_MOUSEEVENTS){J=["touchstart","touchmove","touchend touchcancel"]}else{J=["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"]}}I.EVENT_TYPES[I.EVENT_START]=J[0];I.EVENT_TYPES[I.EVENT_MOVE]=J[1];I.EVENT_TYPES[I.EVENT_END]=J[2]},getTouchList:function g(J){if(I.HAS_POINTEREVENTS){return I.PointerEvent.getTouchList()}else{if(J.touches){return J.touches}else{return[{identifier:1,pageX:J.pageX,pageY:J.pageY,target:J.target}]}}},collectEventData:function p(L,K,M){var N=this.getTouchList(M,K);var J=I.POINTER_TOUCH;if(M.type.match(/mouse/)||I.PointerEvent.matchType(I.POINTER_MOUSE,M)){J=I.POINTER_MOUSE}return{center:I.utils.getCenter(N),timeStamp:new Date().getTime(),target:M.target,touches:N,eventType:K,pointerType:J,srcEvent:M,preventDefault:function(){if(this.srcEvent.preventManipulation){this.srcEvent.preventManipulation()}if(this.srcEvent.preventDefault){this.srcEvent.preventDefault()}},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return I.detection.stopDetect()}}}};I.PointerEvent={pointers:{},getTouchList:function(){var J=this;var K=[];Object.keys(J.pointers).sort().forEach(function(L){K.push(J.pointers[L])});return K},updatePointer:function(K,J){if(K==I.EVENT_END){this.pointers={}}else{J.identifier=J.pointerId;this.pointers[J.pointerId]=J}return Object.keys(this.pointers).length},matchType:function(J,L){if(!L.pointerType){return false}var K={};K[I.POINTER_MOUSE]=(L.pointerType==L.MSPOINTER_TYPE_MOUSE||L.pointerType==I.POINTER_MOUSE);K[I.POINTER_TOUCH]=(L.pointerType==L.MSPOINTER_TYPE_TOUCH||L.pointerType==I.POINTER_TOUCH);K[I.POINTER_PEN]=(L.pointerType==L.MSPOINTER_TYPE_PEN||L.pointerType==I.POINTER_PEN);return K[J]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}};I.utils={extend:function B(J,L,M){for(var K in L){if(J[K]!==i&&M){continue}J[K]=L[K]}return J},hasParent:function(K,J){while(K){if(K==J){return true}K=K.parentNode}return false},getCenter:function z(M){var N=[],L=[];for(var K=0,J=M.length;K<J;K++){N.push(M[K].pageX);L.push(M[K].pageY)}return{pageX:((Math.min.apply(Math,N)+Math.max.apply(Math,N))/2),pageY:((Math.min.apply(Math,L)+Math.max.apply(Math,L))/2)}},getVelocity:function l(J,L,K){return{x:Math.abs(L/J)||0,y:Math.abs(K/J)||0}},getAngle:function h(L,K){var M=K.pageY-L.pageY,J=K.pageX-L.pageX;return Math.atan2(M,J)*180/Math.PI},getDirection:function f(L,K){var J=Math.abs(L.pageX-K.pageX),M=Math.abs(L.pageY-K.pageY);if(J>=M){return L.pageX-K.pageX>0?I.DIRECTION_LEFT:I.DIRECTION_RIGHT}else{return L.pageY-K.pageY>0?I.DIRECTION_UP:I.DIRECTION_DOWN}},getDistance:function e(L,K){var J=K.pageX-L.pageX,M=K.pageY-L.pageY;return Math.sqrt((J*J)+(M*M))},getScale:function q(K,J){if(K.length>=2&&J.length>=2){return this.getDistance(J[0],J[1])/this.getDistance(K[0],K[1])}return 1},getRotation:function x(K,J){if(K.length>=2&&J.length>=2){return this.getAngle(J[1],J[0])-this.getAngle(K[1],K[0])}return 0},isVertical:function o(J){return(J==I.DIRECTION_UP||J==I.DIRECTION_DOWN)},stopDefaultBrowserBehavior:function u(L,K){var O,N=["webkit","khtml","moz","ms","o",""];if(!K||!L.style){return}for(var J=0;J<N.length;J++){for(var M in K){if(K.hasOwnProperty(M)){O=M;if(N[J]){O=N[J]+O.substring(0,1).toUpperCase()+O.substring(1)}L.style[O]=K[M]}}}if(K.userSelect=="none"){L.onselectstart=function(){return false}}}};I.detection={gestures:[],current:null,previous:null,stopped:false,startDetect:function G(K,J){if(this.current){return}this.stopped=false;this.current={inst:K,startEvent:I.utils.extend({},J),lastEvent:false,name:""};this.detect(J)},detect:function F(M){if(!this.current||this.stopped){return}M=this.extendEventData(M);var N=this.current.inst.options;for(var L=0,J=this.gestures.length;L<J;L++){var K=this.gestures[L];if(!this.stopped&&N[K.name]!==false){if(K.handler.call(K,M,this.current.inst)===false){this.stopDetect();break}}}if(this.current){this.current.lastEvent=M}if(M.eventType==I.EVENT_END&&!M.touches.length-1){this.stopDetect()}return M},stopDetect:function m(){this.previous=I.utils.extend({},this.current);this.current=null;this.stopped=true},extendEventData:function H(N){var O=this.current.startEvent;if(O&&(N.touches.length!=O.touches.length||N.touches===O.touches)){O.touches=[];for(var L=0,J=N.touches.length;L<J;L++){O.touches.push(I.utils.extend({},N.touches[L]))}}var K=N.timeStamp-O.timeStamp,Q=N.center.pageX-O.center.pageX,P=N.center.pageY-O.center.pageY,M=I.utils.getVelocity(K,Q,P);I.utils.extend(N,{deltaTime:K,deltaX:Q,deltaY:P,velocityX:M.x,velocityY:M.y,distance:I.utils.getDistance(O.center,N.center),angle:I.utils.getAngle(O.center,N.center),direction:I.utils.getDirection(O.center,N.center),scale:I.utils.getScale(O.touches,N.touches),rotation:I.utils.getRotation(O.touches,N.touches),startEvent:O});return N},register:function a(K){var J=K.defaults||{};if(J[K.name]===i){J[K.name]=true}I.utils.extend(I.defaults,J,true);K.index=K.index||1000;this.gestures.push(K);this.gestures.sort(function(M,L){if(M.index<L.index){return -1}if(M.index>L.index){return 1}return 0});return this.gestures}};I.gestures=I.gestures||{};I.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:true,doubletap_distance:20,doubletap_interval:300},handler:function E(L,M){if(L.eventType==I.EVENT_END){var K=I.detection.previous,J=false;if(L.deltaTime>M.options.tap_max_touchtime||L.distance>M.options.tap_max_distance){return}if(K&&K.name=="tap"&&(L.timeStamp-K.lastEvent.timeStamp)<M.options.doubletap_interval&&L.distance<M.options.doubletap_distance){M.trigger("doubletap",L);J=true}if(!J||M.options.tap_always){I.detection.current.name="tap";M.trigger(I.detection.current.name,L)}}}};I.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:0.7},handler:function b(J,K){if(J.eventType==I.EVENT_END){if(K.options.swipe_max_touches>0&&J.touches.length>K.options.swipe_max_touches){return}if(J.velocityX>K.options.swipe_velocity||J.velocityY>K.options.swipe_velocity){K.trigger(this.name,J);K.trigger(this.name+J.direction,J)}}}};I.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:false,drag_block_vertical:false,drag_lock_to_axis:false,drag_lock_min_distance:25},triggered:false,handler:function C(J,K){if(I.detection.current.name!=this.name&&this.triggered){K.trigger(this.name+"end",J);this.triggered=false;return}if(K.options.drag_max_touches>0&&J.touches.length>K.options.drag_max_touches){return}switch(J.eventType){case I.EVENT_START:this.triggered=false;break;case I.EVENT_MOVE:if(J.distance<K.options.drag_min_distance&&I.detection.current.name!=this.name){return}I.detection.current.name=this.name;if(I.detection.current.lastEvent.drag_locked_to_axis||(K.options.drag_lock_to_axis&&K.options.drag_lock_min_distance<=J.distance)){J.drag_locked_to_axis=true}var L=I.detection.current.lastEvent.direction;if(J.drag_locked_to_axis&&L!==J.direction){if(I.utils.isVertical(L)){J.direction=(J.deltaY<0)?I.DIRECTION_UP:I.DIRECTION_DOWN}else{J.direction=(J.deltaX<0)?I.DIRECTION_LEFT:I.DIRECTION_RIGHT}}if(!this.triggered){K.trigger(this.name+"start",J);this.triggered=true}K.trigger(this.name,J);K.trigger(this.name+J.direction,J);if((K.options.drag_block_vertical&&I.utils.isVertical(J.direction))||(K.options.drag_block_horizontal&&!I.utils.isVertical(J.direction))){J.preventDefault()}break;case I.EVENT_END:if(this.triggered){K.trigger(this.name+"end",J)}this.triggered=false;break}}};I.gestures.Touch={name:"touch",index:-Infinity,defaults:{prevent_default:false,prevent_mouseevents:false},handler:function s(J,K){if(K.options.prevent_mouseevents&&J.pointerType==I.POINTER_MOUSE){J.stopDetect();return}if(K.options.prevent_default){J.preventDefault()}if(J.eventType==I.EVENT_START){K.trigger(this.name,J)}}};I.gestures.Release={name:"release",index:Infinity,handler:function r(J,K){if(J.eventType==I.EVENT_END){K.trigger(this.name,J)}}};if(typeof module==="object"&&typeof module.exports==="object"){module.exports=I}else{n.Hammer=I;if(typeof n.define==="function"&&n.define.amd){n.define("hammer",[],function(){return I})}}})(this);