"use strict";var idx=0,totalPages=4,offscreenX=-150;var page,container,content,mainDiv,soccerman,ball;var screenW;var tabTimeout,transformProp;var frame=1,runAnim,bounce,ballTimeline,introTimeline;var kickDelay=2000;var kickTimeout=-1;var _raf=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;function init(){mainDiv=document.getElementById("content");container=document.getElementById("page-container");content=document.getElementById("content-container");soccerman=document.getElementById("soccerman");ball=document.getElementById("ball");TweenLite.set(soccerman,{x:offscreenX});TweenLite.set(ball,{x:offscreenX});ballTimeline=new TimelineMax({onComplete:soccerAnimComplete,paused:true});introTimeline=new TimelineMax({paused:true});bounce=new TimelineLite({onComplete:function(){this.restart()}});window.addEventListener("resize",onResize,false);onResize(null);createTweens();soccerman.className="idle";ball.className="";container.className=content.className=container.className.replace(/\s?hidden\s?/,"");tabTimeout=setTimeout(animatePageTabs,3000);onTransitionEnd()}function onResize(a){screenW=mainDiv.clientWidth;redrawPages();redrawTweens()}function animatePageTabs(){var a=currentPage().querySelector(".page-tab");a.style.backgroundPosition=(getComputedStyle(a).backgroundPosition.substr(0,4)=="100%")?"0% 0":"100% 0";tabTimeout=setTimeout(animatePageTabs,3000)}function currentPage(){return document.getElementById("page"+(idx+1))}function onTransitionEnd(){var a=parseInt(container.style[transformProp].match(/\(-?([0-9]+?)px/)[1])%page.width;if(a>0){return}log("onTransitionEnd");container.removeEventListener("webkitTransitionEnd",onTransitionEnd,false);bounce.restart();runAnim.restart();introTimeline.restart();kickTimeout=setTimeout(kick,kickDelay)}function updateSprite(){soccerman.className="run"+frame}function kick(){bounce.pause();soccerman.className="kick";ballTimeline.play()}function soccerAnimComplete(){log("soccerAnimComplete");if(kickTimeout!=-1){clearTimeout(kickTimeout)}ballTimeline.seek(0);ballTimeline.pause();runAnim.seek(0);runAnim.pause();soccerman.className="idle";bounce.restart();introTimeline.pause();introTimeline.seek(0);TweenLite.set(soccerman,{x:offscreenX});TweenLite.set(ball,{x:offscreenX})}function updateSprite(){soccerman.className="run"+frame}function interruptAnim(){if(!ballTimeline.paused()||!introTimeline.paused()){soccerAnimComplete()}};